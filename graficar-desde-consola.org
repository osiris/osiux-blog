#+TITLE:       Graficar desde consola
#+AUTHOR:      Osiris Alejandro Gómez
#+EMAIL:       osiux@osiux.com
#+LANGUAGE:    es
#+LINK_HOME:   index.html
#+OPTIONS:     toc:nil timestamp:nil
#+INCLUDE: "header.org"
#+DATE:        2014-03-11

** barra

   #+BEGIN_SRC sh :session :results output :exports both
     ssh vodka 'cat osiux.com-access.log | egrep -o "GET /.*HTTP" | sed s/HTTP//g | cut -c 5- | sort | uniq -c | sort -nr | head' | barra
   #+END_SRC

   #+RESULTS:
   #+begin_example
    37.13 %  37.13 %       225 ██████████████████ / 
    60.73 %  23.60 %       143 ████████████ /robots.txt 
    69.64 %   8.91 %        54 ████ /osiux.css 
    77.89 %   8.25 %        50 ████ /favicon.ico 
    85.31 %   7.43 %        45 ███ /feed 
    89.77 %   4.46 %        27 ██ /img/flisol-bogota/ciudad-bolivar-1.jpg 
    92.57 %   2.81 %        17 █ /blog.html 
    95.21 %   2.64 %        16 █ /osiux.html 
    97.69 %   2.48 %        15 █ /index.html 
   100.00 %   2.31 %        14 █ /todo-txt-rst%2Borg-mode.html 
                           606
   #+end_example

** block-diag
** ditaa

   #+BEGIN_SRC ditaa :file ditaa-der.png :cmdline -E
     +------------------------+   +------------+   +------------------------+   +----------------+
     | gcoop_salesopportunity |   | campaigns  |   | securitygroups_records |   | securitygroups |
     +------------------------+   +------------+   +------------------------+   +----------------+
     | campaign_id            |-->| id         |-->| record_id              |   | name           |
     | id                     |   +------------+   | securitygroup_id       |-->| id             |
     +------------------------+                    +------------------------+   +----------------+
   #+END_SRC

   #+RESULTS:
   [[file:ditaa-der.png]]

   #+BEGIN_SRC sh :session :results output
     pqiv -i ditaa-der.png
   #+END_SRC

   #+RESULTS:

** gnuplot

   #+BEGIN_SRC sh :session :results file
     cd ~/data/bcc/gca/cct-2797
     egrep "0895.*Query Execution Time:[0-9\.]+" sugarcct6.log | awk '{print $4"\t"$9}' | sed s/"Time:"//g | awk '{if ($2>h[$1]) h[$1]=$2} END {for (hh in h) print hh,h[hh]}' | sort  | tee 0895-query-execution-time.dat
   #+END_SRC

   #+RESULTS:
   | 12:17:08 |  0.0302698612213 |
   | 12:17:11 | 0.00952696800232 |
   | 12:17:21 |  0.0434710979462 |
   | 12:17:22 |    0.01877784729 |
   | 12:17:25 |  0.0104238986969 |
   | 12:17:26 |  0.0150380134583 |
   | 12:17:28 |    1.61865592003 |
   | 12:17:29 |   0.022381067276 |
   | 12:17:30 | 0.00826001167297 |
   | 12:17:50 | 0.00913214683533 |
   | 12:17:51 |  0.0108060836792 |

   #+BEGIN_SRC gnuplot :var data='~/data/bcc/gca/cct-2797/0895-query-execution-time.dat' :file ~/data/bcc/gca/cct-2797/0895-query-execution-time.png
   reset
   set terminal png size 800,600
   set lmargin 10
   set bmargin 5
   set rmargin 5
   set title "CCT-2797: Mximo Tiempo de ejecución Queries usuario 0895\nsugarcct6.log" font "Inconsolata,10"
   set xdata time
   set timefmt x '%H:%M:%S'
   set format x '%H:%M:%S'
   set xtics font 'Inconsolata,8' rotate
   set mxtics
   set key off
   set tics font "Inconsolata,8" nomirror
   set mytics
   set grid ytics
   set xlabel "horario" font "Inconsolata,9"
   set ylabel "tiempo en segundos" font "Inconsolata,9"

   plot data u 1:2 lw 5 w i
   #+END_SRC

   #+RESULTS:
   [[file:~/data/bcc/gca/cct-2797/0895-query-execution-time.png]]

** graphviz

   #+BEGIN_SRC dot :file graphviz-01.png :cmdline -Kdot -Tpng :exports both
     digraph x {
     a -> b;
     b -> c;
     }
   #+END_SRC

   #+RESULTS:
   [[file:graphviz-01.png]]

** image-magick

   - [[file:imagenes-magicas-imagemagick.org]]

** org-timeline

   #+BEGIN_SRC sh :session :results output :exports both
     org-clock 2014-02-28 | org-timeline
   #+END_SRC

   #+RESULTS:
   : 12:    13:    14:    15:    16:    17:    18:    19:    20:    21:    22:     
   :   ┊      ┊      ┊      ┊      ┊      ┊      ┊      ┊      ┊      ┊      ┊     
   :   ┊□□▨▣▣▣┊□□□▣▣▣┊□□□□□□┊□□□□□□┊□▣▣▣▣▣┊□□□□□□┊□□□□□□┊□□□□□□┊□□▣▣▨□┊□▣▣▣□□┊        gca ===============>  401
   :   ┊□□□□□□┊□▣▣▣□□┊□□□□□□┊□□□□□□┊□□□□□□┊□□□□□□┊□□□□□□┊□□□□□□┊□□□□□□┊□□□□□□┊   almuerzo ===============>   31
   :   ┊      ┊      ┊      ┊      ┊      ┊      ┊      ┊      ┊      ┊      ┊      TOTAL ===============>  432

** plant-uml
*** Diagramas de Clase

   #+BEGIN_SRC plantuml :file plant-uml-der.png :exports both
    campaign "1" *-- "many" calls
        campaign <|-- campaigns

    class campaign {
        -id
    -id_sugar
        }

    class calls {
        -id
    -id_campaign
        }

    class campaigns {
        -id
    -nroLote
        -name
        -hola()
        }
   #+end_src

   #+RESULTS:
   [[file:plant-uml-der.png]]

   #+BEGIN_SRC sh :session :results output
     pqiv -i plant-uml-der.png
   #+END_SRC

   #+RESULTS:

*** Diagramas de Secuencia

    #+BEGIN_SRC plantuml :file secuencia-con-proxy.png :exports none
      skinparam sequenceParticipantFontName Monospaced
      skinparam sequenceParticipantBorderColor black
      skinparam sequenceLifeLineBorderColor black
      skinparam sequenceArrowFontName Monospaced
      skinparam sequenceArrowColor blue

      participant "firefox\n1.2.3.4:4321" as firefox #orange
      participant "proxy\n2.2.2.2" as proxy #green
      participant "DNS\n8.8.8.8:53" as DNS #yellow
      participant "google.com\n6.6.6.6:80" as google #red
      hide footbox
      autonumber "<b>[0]"

      firefox -> DNS: cuál es la IP de <b>google.com</b>
      DNS -> DNS: log
      DNS --> firefox: es la IP <b>6.6.6.6</b>
      firefox -> google: mi IP es <b>1.2.3.4</b> + UserAgent + GET /
      google -> google: log
      google --> firefox: HTML
    #+END_SRC

    #+RESULTS:
    [[file:secuencia-con-proxy.png]]

    #+BEGIN_SRC sh :session :results output
      pqiv -i secuencia-con-proxy.png
    #+END_SRC

    #+RESULTS:

** gnuplot

   #+BEGIN_SRC gnuplot :var data='~/data/bcc/gca/asterisk/asterisk1-bean-query-20.dat' :file asterisk1-bean-query-20.png
     reset
     set term png size 800,600
     set title "sqlsoap_server bean vs query"
     set xlabel "requests" font "Inconsolata,10"
     set ylabel "tiempo en segundos" font "Inconsolata,10"
     set tics out nomirror
     set grid ytics
     set xtics font "Inconsolata,8" nomirror rotate by right at 0.5,0
     set ytics nomirror
     set tics font "Inconsolata,8" nomirror
     set mytics
     set grid lc rgb "#d5e0c9"

     plot data using 1:2 with lines lw 1 lt 3 title 'bean', \
          data using 1:3 with lines lw 1 lt 4 title 'query'

   #+END_SRC

   #+RESULTS:
   [[file:asterisk1-bean-query-20.png]]

   #+BEGIN_SRC sh :session :results none
     pqiv -i ~/org/asterisk1-bean-query-20.png
   #+END_SRC

** links                                                           :noexport:

   - http://www.linuxplanet.com/linuxplanet/tutorials/7317/1
   - http://unix.stackexchange.com/questions/26983/any-text-based-plotting-tools-in-unix-toolbox
   - http://esta-aplicada.blogspot.com.ar/2008/03/diagrama-de-tallo-y-hoja_17.html
   - http://ocw.upm.es/proyectos-de-ingenieria/sistemas-de-informacion-geografica-tecnicas-cuantitativas-para-gestion-de-datos/contenidos/WEB/TEORIA/07exploracion_de_datos.pdf
   - http://www.buenastareas.com/ensayos/An%C3%A1lisis-Para-La-Exploraci%C3%B3n-De-Datos/5863427.html
   - http://centrodeartigos.com/articulos-educativos/article_11172.html
   - http://mikiztli.blogspot.com.es/2007/10/graficando-con-octave-y-gnuplot.html
   - http://www.zcorner.com.ar/2011/graficando-desde-la-consola-con-gnuplot/
   - http://ar.answers.yahoo.com/question/index?qid=20130302194102AA5YaVp
   - http://ar.answers.yahoo.com/question/index?qid=20130302194102AA5YaVp
   - http://vostorga.org/?p=139
   - http://linuxgazette.net/126/peterson.html
   - https://wrongshell.wordpress.com/2013/05/01/graficos-en-la-terminal/
   - http://jcgm011.blogspot.com.ar/2012/06/graficando-nuestros-datos.html
   - http://jcgm011.blogspot.com.ar/2012/06/graficando-nuestros-datos.html
   - http://www.lawebdelprogramador.com/foros/Linux_Programacion/1388647-Como_crear_GRAFICOS_desde_consola_con_API_google.html
   - https://irisus90.wordpress.com/tag/graficar/

#+TITLE:     imágenes mágicas | imagemagick
#+AUTHOR:    Osiris Alejandro Gomez
#+EMAIL:     osiux@osiux.com
#+LANGUAGE:  es
#+LINK_HOME: index.html
#+INCLUDE: "header.org"
#+DATE:      2010-05-10


** Descripción breve

   Resolución a problemas comunes en la manipulación de imágenes
   mediante la generación de scripts usando ImageMagick y otras
   utilidades. Creación y edición de imágenes sin usar un editor
   gráfico, directamente desde una consola. Generar un video a partir de
   fotografías.

** Crear Imagen

   #+BEGIN_SRC sh :session :results none :exports both
     convert -size 640x480 xc:green green.png
   #+END_SRC

   [[file:green.png]]

   #+BEGIN_SRC sh :session :results output :exports none
     pqiv -i green.png
   #+END_SRC

   #+RESULTS:

** identify

   #+BEGIN_SRC sh :session :results output :exports both
     identify green.png
   #+END_SRC

   #+RESULTS:
   : green.png PNG 640x580 640x580+0+0 8-bit PseudoClass 1c 259B 0.000u 0:00.000

** Creative Commons

   #+BEGIN_SRC sh :session :results none :exports code
    convert green.png -fill white \
    -font ~/bin/cc-icons.ttf \
    -pointsize 32 -gravity SouthEast \
    -annotate 0 'cb' \
    green-cc-by.jpg
   #+END_SRC

   #+BEGIN_SRC sh :session :results none
     pqiv -i green-cc-by.jpg
   #+END_SRC

** dark

   #+BEGIN_SRC sh :session :results none :exports code
     composite -compose colorburn gradient.png \
     green-cc-by.jpg dark-green.jpg
   #+END_SRC

   #+BEGIN_SRC sh :session :results none :exports none
     pqiv -i dark-green.jpg
   #+END_SRC

** font

   #+BEGIN_SRC sh :session :results output
     convert dark-green.jpg -fill white \
     -font /usr/share/fonts/truetype/ttf-lucida/LucidaSansRegular.ttf \
     -pointsize 32 -gravity NorthWest \
     -annotate 0 'SASOConf 2014' \
     green-font.jpg
   #+END_SRC

   #+RESULTS:

   #+BEGIN_SRC sh :session :results output
     pqiv -i green-font.jpg
   #+END_SRC

   #+RESULTS:

** rename

.. code-block:: bash

    renombrar.sh
    #!/bin/bash
    c=0;ls | grep jpg | while read f; \
    do mv -v $f $'monte-hermoso-2010-'$c$'.jpg'; \
    c=$[$c+1];done

** #+RESNAME:
   
ize

.. code-block:: bash

    resize.sh
    #!/bin/bash
    ls | grep jpg | while read f;do echo $f; \
    convert -filter cubic -resize 640 $f $'mini-'$f;done

** gray

.. code-block:: bash

    convert osiux-color.jpg +dither -colors 2 -colorspace gray -contrast-stretch 0 osiux-2-grises.jpg
    convert osiux-color.jpg +dither -colors 4 -colorspace gray -contrast-stretch 0 osiux-4-grises.jpg
    convert osiux-color.jpg +dither -colors 8 -colorspace gray -contrast-stretch 0 osiux-8-grises.jpg

    convert +append osiux-color.jpg osiux-2-grises.jpg osiux-4-grises.jpg osiux-8-grises.jpg

.. image:: img/osiux-dither-colorspace-gray.jpg

** edge

   #+BEGIN_SRC sh :session :results output
     convert img/no-soy-un-pirata-compartir-es-bueno.jpg -colorspace Gray -edge 1 gris-edge.jpg
   #+END_SRC

   #+RESULTS:

   #+BEGIN_SRC sh :session :results output
     pqiv -i gris-edge.jpg
   #+END_SRC

   #+RESULTS:

** edge + Negate

   #+BEGIN_SRC sh :session :results output
     convert img/no-soy-un-pirata-compartir-es-bueno.jpg -colorspace Gray -edge 1 -negate gris-edge-negate.jpg
   #+END_SRC

   #+RESULTS:

   #+BEGIN_SRC sh :session :results output
     pqiv -i gris-edge-negate.jpg
   #+END_SRC

   #+RESULTS:

** edge + negate + blur

.. code-block:: bash

    for i in {1..4};do convert osiux-edge-$i-negate.jpg -blur 0x1 osiux-edge-$i-negate-blur.jpg;done
    convert +append osiux-edge-1-negate-blur.jpg osiux-edge-2-negate-blur.jpg osiux-edge-3-negate-blur.jpg osiux-edge-4-negate-blur.jpg osiux-edge-negate-blur.jpg

.. image:: img/osiux-edge-negate-blur.jpg

** charcoal (edge + negate + blur)

.. code-block:: bash

    for i in {1..4};do convert osiux-color.jpg -charcoal $i osiux-charcoal-$i.jpg;done
    convert +append osiux-charcoal-1.jpg osiux-charcoal-2.jpg osiux-charcoal-3.jpg osiux-charcoal-4.jpg osiux-charcoal.jpg

.. image:: img/osiux-charcoal.jpg


** append

   #+BEGIN_SRC sh :session :results output
     convert -append img/no-soy-un-pirata-compartir-es-bueno.jpg gris-edge.jpg gris-edge-negate.jpg append.jpg
     convert +append append.jpg append.jpg 3x3.jpg
   #+END_SRC

   #+RESULTS:

   #+BEGIN_SRC sh :session :results output
     pqiv -i 3x3.jpg
   #+END_SRC

   #+RESULTS:



